{"version":3,"file":"page-2.js","sources":["../src/js/author-form.js"],"sourcesContent":["import { authors } from './authors.js';\n\n// let authorList = document.querySelector('#authorList');\n// let saveButton = document.querySelector('#saveButton');\n// let selectAuthor = null;\n\nlet formAuthor = document.querySelector('#input-author');\nlet formInput = document.querySelector('#input');\n\nlet form = document.querySelector('#output');\nlet bookForm = document.querySelector('#book');\n\nlet result = document.querySelector('.books');\nlet resultAuth = document.querySelector('.authors');\n// let tableAuth = document.querySelector('.record-author');\n\n// let catalog = [];\n\n// /////////////////////////////////////////////////////////////////\nlet catalog1 = [];  \nif (localStorage.getItem('author')) {\n  catalog1 = JSON.parse(localStorage.getItem('author'));\n  //  функція  \n}\n\n\nlet bibliography1 = [];\n\nformAuthor.addEventListener('submit', onFormAuthorSubmit);\nformInput.addEventListener('submit', onFormInputSubmit);\n\nfunction onFormAuthorSubmit(event) {\n  event.preventDefault();\n\n  const formData = new FormData(event.currentTarget);\n  console.log(formData);\n  let data = Object.fromEntries(formData.entries());\n  console.log(data);\n\n  catalog1.push(data);\n  console.log(catalog1);\n\n  // localStorage\n  // localStorage.setItem('author', JSON.stringify(catalog1));\n\n  // resultAuth.innerHTML = `<table class=\"record-author\"></table>`;\n  resultAuth.innerHTML = `<table class=\"record-author\"> \n  <thead>\n    <tr>\n      <th data-type=\"string\">Автори</th>\n      <th data-type=\"number\">Книг в базе</th>\n    </tr>\n    </thead>\n    <tbody class=\"rec-auth\"></tbody>\n    </table>`;\n\n  createAuthorsIn(catalog1);\n\n  let tableAuth = document.querySelector('.record-author');\n  // console.log(resultAuth);\n  console.log(tableAuth);\n\n  tableAuth.onclick = function (e) {\n    if (e.target.tagName != 'TH') return;\n    let th = e.target;\n    sortTable(th.cellIndex, th.dataset.type);\n  };\n\n  function sortTable(colNum, type) {\n    let tbody = tableAuth.querySelector('tbody');\n    let rowsArray = Array.from(tbody.rows);\n    let compare;\n    switch (type) {\n      case 'number':\n        compare = function (rowA, rowB) {\n          return rowA.cells[colNum].innerHTML - rowB.cells[colNum].innerHTML;\n        };\n        break;\n      case 'string':\n        compare = function (rowA, rowB) {\n          return rowA.cells[colNum].innerHTML > rowB.cells[colNum].innerHTML\n            ? 1\n            : -1;\n        };\n        break;\n    }\n    rowsArray.sort(compare);\n    tbody.append(...rowsArray);\n  }\n} \n\nfunction createAuthorsIn(value) {\n  console.log(value);\n  for (let i = 0; i < value.length; i++) {\n    let row = document.createElement('tr');\n    row.id = `text`;\n    row.className = `note`;\n    row.innerHTML = `    \n    <td>${value[i].initials}</td>\n    <td>${value[i].collection}</td>            \n    <input name=\"del-auth\" type=\"button\" value=\"удалить\"/>`;\n\n    document.querySelector('.rec-auth').appendChild(row);\n\n    let els = document.getElementsByName('del-auth');\n    console.log(els);\n    els.forEach(function (item) {\n      console.log(item);\n      item.addEventListener('click', function () {\n        console.log(item);\n        item.parentNode.parentNode.removeChild(item.parentNode);\n      });\n    }); \n\n    document.getElementById('initials').value = ' ';\n    document.getElementById('collection').value = '0';     \n  }\n}\n\n\n\nfunction onFormInputSubmit(event) {\n  event.preventDefault();\n\n  const formData = new FormData(event.currentTarget);\n  console.log(formData);\n  let data = Object.fromEntries(formData.entries());\n  console.log(data);\n\n  bibliography1.push(data); //   \n  console.log(bibliography1);\n\n  // localStorage;\n  // localStorage.setItem('contex', JSON.stringify(bibliography1));\n \n  result.innerHTML = `<table class=\"record\"></table>`;\n  console.log(result);\n  createBooksIn(bibliography1);\n\n  // event.currentTarget.reset();\n\n  console.log(event.currentTarget);\n}\n\nfunction createBooksIn(value) {\n  console.log(value);\n  for (let i = 0; i < value.length; i++) {\n    let row = document.createElement('tr');\n    row.id = `text`;\n    row.className = `note`;\n    row.innerHTML = `\n    <td>${value[i].title}</td>\n    <td>${value[i].paging}</td>     \n    <td>${value[i].genre}</td>  \n    <input name=\"del\" type=\"button\" value=\"удалить\"/>`;\n\n    document.querySelector('.record').appendChild(row);\n\n    let els = document.getElementsByName('del');\n    els.forEach(function (item) {\n      item.addEventListener('click', function () {\n        item.parentNode.parentNode.removeChild(item.parentNode);\n      });\n    });\n    document.getElementById('title').value = ' ';\n    document.getElementById('paging').value = '0';\n    // document.getElementById('genre').value = ' ';\n    console.log(value);\n  }\n}\n\n// /////////////////////////////////////////////////////////////////////////\n// let bibliography = [];\n\n// form.addEventListener('submit', onFormSubmit);\n// bookForm.addEventListener('submit', onBookFormSubmit);\n\n// function onFormSubmit(event) {\n//   event.preventDefault();\n\n//   const formData = new FormData(event.currentTarget);\n//   console.log(formData);\n//   let data = Object.fromEntries(formData.entries());\n//   console.log(data);\n\n//   const num = catalog.push(data);\n//   console.log(catalog);\n//   localStorage.setItem('author', JSON.stringify(catalog));\n\n//   document.querySelector(\n//     '.content'\n//   ).innerHTML = `<table class=\"authors\"></table>`;\n\n//   // const { surname, nameA, patronymic, dob } = data;\n//   // let row = document.createElement('tr');\n//   // row.innerHTML = `\n//   // <td>${surname}</td>\n//   // <td>${nameA}</td>\n//   // <td>${patronymic}</td>\n//   // <td>${dob}</td> `;\n//   // document.querySelector('.authors').appendChild(row);\n\n//   for (let i = 0; i < catalog.length; i++) {\n//     let row = document.createElement('tr');\n//     row.innerHTML = `\n//     <td>${catalog[i].surname}</td>\n//     <td>${catalog[i].nameA}</td>\n//     <td>${catalog[i].patronymic}</td>\n//     <td>${catalog[i].dob}</td> `;\n\n//     document.querySelector('.authors').appendChild(row);\n//   }\n//   // }\n\n//   event.currentTarget.reset();\n//   // form.reset();\n// }\n\n// function onBookFormSubmit(event) {\n//   event.preventDefault();\n\n//   const formData = new FormData(event.currentTarget);\n//   console.log(formData);\n//   let data = Object.fromEntries(formData.entries());\n//   console.log(data);\n\n//   bibliography.push(data); //   ЛИШНЯЯ  ПЕРЕМЕННАЯ\n//   console.log(bibliography);\n\n//   // localStorage.setItem('key', JSON.sringify(bibliography));\n\n//   // document.querySelector(\n//   //   '.books'\n//   //   ).innerHTML = `<table class=\"record\"></table>`;\n\n//   result.innerHTML = `<table class=\"record\"></table>`;\n\n//   console.log(result);\n//   // for (let i = 0; i < bibliography.length; i++) {\n//   //   let row = document.createElement('tr');\n//   //   row.innerHTML = `\n//   //   <td>${bibliography[i].title}</td>\n//   //   <td>${bibliography[i].paging}</td>\n//   //   <td>${bibliography[i].genre}</td> `;\n\n//   //   document.querySelector('.record').appendChild(row);\n//   // }\n//   console.log(bibliography);\n//   createBooks(bibliography);\n\n//   console.log(bibliography);\n\n//   // bibliography.forEach(function (item, i) {\n//   //   let row = document.createElement('tr');\n//   //   row.innerHTML = `\n//   //   <td>${bibliography[i].title}</td>\n//   //   <td>${bibliography[i].paging}</td>\n//   //   <td>${bibliography[i].genre}</td> `;\n\n//   //   document.querySelector('.record').appendChild(row);\n//   // });\n//   event.currentTarget.reset();\n// }\n\n// let delButton = document.querySelector('.btn');\n// let bookItem = document.querySelector('tr');\n\n// delButton.addEventListener('click', e => {\n//   console.log(bookItem);\n// });\n\n// function createBooks(value) {\n//   console.log(value);\n//   for (let i = 0; i < value.length; i++) {\n//     let row = document.createElement('tr');\n//     row.id = `text`;\n//     row.className = `note`;\n//     row.innerHTML = `\n//     <td>${value[i].title}</td>\n//     <td>${value[i].paging}</td>     \n//     <td>${value[i].genre}</td>  \n\n//     <input name=\"del\" type=\"button\" value=\"удалить\"/>`;\n//     // <button class=\"btn\">удалить</button>`;\n//     // <input name=\"del\" type=\"button\" value=\"удалить\"/>`;\n\n//     //  <button class=\"btn\">удалить</button>`;\n\n//     //  <label for=\"size\">Size</label>\n//     // <select id=\"size\" name=\"size\">\n//     // <option value=\"xs\">Extra Small</option>\n//     // <option value=\"s\">Small</option>\n//     // <option value=\"m\" selected>Medium</option>\n//     // <option value=\"l\">Large</option>\n//     // </select>\n\n//     document.querySelector('.record').appendChild(row);\n//     //  let tab = document.querySelector('.record');\n//     //  let tabRows = document.querySelector('.note');\n//     //  let delButton = document.querySelector('.btn');\n\n//     // console.log(tab);\n//     // console.log(tabRows);\n//     //  console.log(delButton);\n\n//     //  delButton.addEventListener('click', e => {\n//     //    for (let row of tabRows) {\n//     //      elem.remove();\n//     //    }\n\n//     let els = document.getElementsByName('del');\n//     els.forEach(function (item) {\n//       item.addEventListener('click', function () {\n//         item.parentNode.parentNode.removeChild(item.parentNode);\n//       });\n//     });\n\n//     //  let delButton = document.querySelector('.btn');\n//     //  delButton.addEventListener('click', (e) => {\n//     //   //  console.log(bookItem);\n//     //   let note = document.getElementById(`text`);\n//     //    note.removeChild(note.lastElementChild);\n//     //  })\n//   }\n// } \n\n// const makeAuthorsTableRowMarkup = data => {\n// const { surname, nameA, patronymic, dob } = data;\n\n//   return `\n//   <tr>\n//     <td>${surname}</td>\n//     <td>${nameA}</td>\n//     <td>${patronymic}</td>\n//     <td>${dob}</td>\n//   </tr>\n//   `;\n// };\n\n// console.log(authors);\n// const tableEl = document.querySelector('.authors-table');\n// const transactionTableRowsMarkup = authors\n//   .map(makeAuthorsTableRowMarkup)\n//   .join('');\n\n// tableEl.insertAdjacentHTML('beforeend', transactionTableRowsMarkup);\n\n// console.log(transactionTableRowsMarkup);\n\n// for (let index = 0; index < authors.length; index++) {\n//   const currentAuthor = authors[index];\n//   let li = document.createElement('li');\n//   li.textContent = currentAuthor.surname + ' ' + currentAuthor.nameA;\n//   li.dataset.authorNumber = index;\n//   authorList.append(li);\n//   // console.log(li);\n// }\n\n// Встановлення обробників \n\n// authorList.addEventListener('click', function (e) {\n//   if (e.target.tagName != 'LI') return;\n//   selectAuthor = authors[e.target.dataset.authorNumber];\n\n//   fillForm(selectAuthor);\n//   selectListItem(e.target);\n// });\n\n// saveButton.addEventListener('click', function () {\n//   updateAuthor(selectAuthor);\n// });\n\n// Логіка \n\n// function selectListItem(element) {\n//   deselectAllListItems();\n//   element.classList.add('selected');\n// }\n\n// function deselectAllListItems() {\n//   let selectedItems = document.querySelectorAll('li.selected');\n//   for (let i = 0; i < selectedItems.length; i++) {\n//     const element = selectedItems[i];\n//     element.classList.remove('selected');\n//   }\n// }\n\n// function fillForm(selectAuthor) {\n//   const form = document.forms[0];\n\n//   form.surname.value = selectAuthor.surname;\n//   form.nameA.value = selectAuthor.nameA;\n//   form.patronymic.value = selectAuthor.patronymic;\n//   form.dob.value = selectAuthor.dob;\n//   //   form.email.value = selectAuthor.email;\n//   //   form.age.value = selectAuthor.age;\n// }\n\n// function updateAuthor(selectAuthor) {\n//   const form = document.forms[0];\n\n//   selectAuthor.surname = form.surname.value;\n//   selectAuthor.nameA = form.nameA.value;\n//   selectAuthor.patronymic = form.patronymic.value;\n//   selectAuthor.dob = form.dob.value;\n//   //   selectAuthor.email = form.email.value;\n//   //   selectAuthor.age = form.age.value;\n// }\n"],"names":["formAuthor","formInput","result","resultAuth","catalog1","bibliography1","onFormAuthorSubmit","onFormInputSubmit","event","formData","data","createAuthorsIn","tableAuth","e","th","sortTable","colNum","type","tbody","rowsArray","compare","rowA","rowB","value","i","row","els","item","createBooksIn"],"mappings":"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"}